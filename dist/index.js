(()=>{"use strict";const e=[];class t{constructor(e,t,d,n){this.name=e,this.id=t,this.description=d,this.icon=n,this.tasks=[]}addTask(e){this.tasks.push(e)}}class d{constructor(t,d,n,a){this.id=`${t}-task-${function(t){for(let d of e)if(d.id===t)return d.tasks.length+1}(t)}`,this.description=d,this.priority=n,this.date=a}}function n(){let t,d,n=document.querySelectorAll(".default-field"),a=document.querySelectorAll(".added-field"),o=Array.prototype.concat.call(...n,...a);for(let e of o)e.getAttribute("class").includes("active")&&(t=e.getAttribute("id"));for(let n of e)n.id===t&&(d=e.indexOf(n));return d}function a(e){if("inbox"===e||"today"===e||"week"===e||"logbook"===e)return!0}function o(t){let d=document.createElement("div"),o=document.createElement("span"),l=document.createElement("div"),r=document.createElement("button"),c=document.createElement("button"),s=document.createElement("button"),u=document.createElement("button");d.classList.add("task"),d.setAttribute("id",t.id),o.classList.add("task-text-content"),l.classList.add("task-options-container"),r.classList.add("edit-task"),c.classList.add("done-task"),s.classList.add("priority-preview"),u.classList.add("task-date"),o.textContent=t.description,r.textContent="Edit",c.textContent="Done",s.textContent=`${t.priority.slice(0,1).toUpperCase()}${t.priority.slice(1)}`,u.textContent=t.date,function(e,t){"low"===t?e.classList.add("low-priority"):"medium"===t?e.classList.add("medium-priority"):"high"===t&&e.classList.add("high-priority")}(d,t.priority),r.addEventListener("click",(()=>{!function(t){const d=document.createElement("div"),a=document.createElement("div"),o=document.createElement("textarea"),l=document.createElement("p"),r=document.createElement("p"),c=document.createElement("p"),s=document.createElement("input"),u=document.createElement("select"),p=document.createElement("option"),m=document.createElement("option"),h=document.createElement("option"),C=document.createElement("button"),f=document.createElement("button");let b,y=document.querySelector(`#${t}`);d.setAttribute("id","add-task-modal"),a.setAttribute("id","modal-controls"),o.setAttribute("id","add-task-description"),s.setAttribute("type","date"),s.setAttribute("id","task-date"),l.setAttribute("class","add-task-para"),r.setAttribute("class","add-task-para"),c.setAttribute("class","add-task-para"),u.setAttribute("id","priority-selector"),p.value="low",m.value="medium",h.value="high",C.setAttribute("id","cancel-modal"),f.setAttribute("id","submit-modal"),l.textContent="Enter task description",r.textContent="Enter date",c.textContent="Select priority",p.textContent="Low",m.textContent="Medium",h.textContent="High",C.textContent="Cancel",f.textContent="Submit",o.textContent=y.querySelector(".task-text-content").textContent,s.value=y.querySelector(".task-date").textContent,"Low"===y.querySelector(".priority-preview").textContent?p.setAttribute("selected","selected"):"Medium"===y.querySelector(".priority-preview").textContent?m.setAttribute("selected","selected"):"High"===y.querySelector(".priority-preview").textContent&&h.setAttribute("selected","selected");for(let d of e[n()].tasks)d.id===t&&(b=e[n()].tasks.indexOf(d));d.appendChild(l),d.appendChild(o),d.appendChild(r),d.appendChild(s),d.appendChild(c),d.appendChild(u),d.appendChild(a),u.appendChild(p),u.appendChild(m),u.appendChild(h),a.appendChild(C),a.appendChild(f),a.addEventListener("click",(t=>{let a=t.target.id;if("cancel-modal"===a)document.querySelector("#main-content").removeChild(d);else if("submit-modal"===a){if(""===s.value||""===o.value)return void alert("All fields need to be filled");e[n()].tasks[b].description=o.value,e[n()].tasks[b].priority=u.value,e[n()].tasks[b].date=s.value,i(),document.querySelector("#main-content").removeChild(d)}})),document.querySelector("#main-content").appendChild(d)}(t.id)})),c.addEventListener("click",(()=>{!function(t){for(let d of e)a(d.id)||d.tasks.forEach((n=>{if(t===n.id){let t=d.tasks.indexOf(n);e[3].addTask(n),d.tasks.splice(t,1)}}));i()}(t.id)})),document.querySelector(".task-wrapper").appendChild(d),d.appendChild(o),d.appendChild(l),l.appendChild(r),l.appendChild(c),l.appendChild(s),l.appendChild(u)}function i(){!function(){let e=document.querySelector(".task-wrapper"),t=e.lastElementChild;for(;t;)e.removeChild(t),t=e.lastElementChild}();let t=document.querySelectorAll(".default-field"),d=document.querySelectorAll(".added-field"),i=(Array.prototype.concat.call(...t,...d),e[n()].id),l=document.querySelector(".main-content-title-before"),r=document.querySelector(".main-content-title"),c=document.querySelector(".main-content-description");document.querySelector(".task-wrapper"),function(){e[0].tasks=[];for(let t of e)a(t.id)||t.tasks.forEach((t=>{e[0].addTask(t)}));e[1].tasks=[];for(let t of e)a(t.id)||t.tasks.forEach((t=>{let d=new Date,n=`${d.getFullYear()}-${d.getMonth()}-${d.getDate()}`,a=new Date(t.date);n===`${a.getFullYear()}-${a.getMonth()}-${a.getDate()}`&&e[1].addTask(t)}));e[2].tasks=[];for(let t of e)a(t.id)||t.tasks.forEach((t=>{let d=new Date,n=new Date(d);n.setDate(n.getDate()-n.getDay());let a=new Date(d);a.setDate(a.getDate()+(6-a.getDay()));let o=new Date(t.date),i=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`,l=`${a.getFullYear()}-${a.getMonth()}-${a.getDate()}`,r=`${o.getFullYear()}-${o.getMonth()}-${o.getDate()}`;r>=i&&r<=l&&e[2].addTask(t)}))}();for(let t of e)if(t.id===i){l.textContent=t.icon,r.textContent=t.name,c.textContent=t.description;for(let e of t.tasks)o(e)}}function l(e){let t=[];document.querySelectorAll(".default-field").forEach((e=>t.push(e.getAttribute("id"))));let d=[];document.querySelectorAll(".added-field").forEach((e=>d.push(e.getAttribute("id")))),(t.includes(e)||d.includes(e))&&(function(e){let t=document.querySelectorAll(".default-field"),d=document.querySelectorAll(".added-field");Array.prototype.concat.call(...t,...d).forEach((e=>{e.classList.remove("active")})),document.querySelector(`#${e}`).classList.add("active")}(e),i())}function r(e){"close"===e?(document.querySelector("#add-project-name").value="",document.querySelector("#add-project-description").value="",document.querySelector("#add-project-modal").classList.add("closed-modal")):(e="open")&&document.querySelector("#add-project-modal").classList.remove("closed-modal")}e.push(new t("Inbox","inbox","All created tasks will appear here.","📥")),e.push(new t("Today","today","All tasks with expiration date of today will appear here","⭐")),e.push(new t("This week","week","All tasks with expiration date of this week will appear here","📅")),e.push(new t("Logbook","logbook","All tasks that are completed will appear here","📒")),e.push(new t("Example project","example-project","Example as default project and place to place tasks that will appear in other categories","[icon]")),e[4].addTask(new d(e[4].id,"Random task serving as example and space filler","low","2024-01-21")),l("inbox"),document.querySelector("#middlesidebar").addEventListener("click",(e=>{l(e.target.id)})),document.querySelector("#add-project").addEventListener("click",(()=>{document.querySelector("#add-project-modal").getAttribute("class").includes("closed-modal")?r("open"):r("close")})),document.querySelector("#add-project-modal").addEventListener("click",(d=>{let n=d.target.id;"submit"===n?function(){const d=document.querySelector("#add-project-name").value,n=document.querySelector("#add-project-description").value,a=document.createElement("div"),o=document.createElement("span"),i=document.createElement("span");let l=function(e){return e.includes(" ")?e.replaceAll(" ","-").toLowerCase():e.toLowerCase()}(d);if(function(t){for(let d of e)if(d.id===t)return!0}(l))return alert("You can't use the same name as old pojects"),void(document.querySelector("#add-project-name").value="");""!==d?""!==n?(a.setAttribute("id",l),a.classList.add("added-field"),o.textContent="[icon]",o.classList.add("iconHolderSpan"),i.textContent=d,i.classList.add("textHolderSpan"),document.querySelector(".added-fields").appendChild(a),a.appendChild(o),a.appendChild(i),e.push(new t(d,l,n,"[icon]")),r("close")):alert("You need to enter project description"):alert("You need to enter project name")}():"cancel"===n&&r("close")})),document.querySelector("#footer").addEventListener("click",(t=>{let r=t.target.id;"add-task"===r?function(){if(a(e[n()].id))return void alert("You can only add tasks in added projects");const t=document.createElement("div"),i=document.createElement("div"),l=document.createElement("textarea"),r=document.createElement("p"),c=document.createElement("p"),s=document.createElement("p"),u=document.createElement("input"),p=document.createElement("select"),m=document.createElement("option"),h=document.createElement("option"),C=document.createElement("option"),f=document.createElement("button"),b=document.createElement("button");t.setAttribute("id","add-task-modal"),i.setAttribute("id","modal-controls"),l.setAttribute("id","add-task-description"),u.setAttribute("type","date"),u.setAttribute("id","task-date"),r.setAttribute("class","add-task-para"),c.setAttribute("class","add-task-para"),s.setAttribute("class","add-task-para"),p.setAttribute("id","priority-selector"),m.value="low",h.value="medium",C.value="high",f.setAttribute("id","cancel-modal"),b.setAttribute("id","submit-modal"),r.textContent="Enter task description",c.textContent="Enter date",s.textContent="Select priority",m.textContent="Low",h.textContent="Medium",C.textContent="High",f.textContent="Cancel",b.textContent="Submit",t.appendChild(r),t.appendChild(l),t.appendChild(c),t.appendChild(u),t.appendChild(s),t.appendChild(p),t.appendChild(i),p.appendChild(m),p.appendChild(h),p.appendChild(C),i.appendChild(f),i.appendChild(b),i.addEventListener("click",(a=>{let i=a.target.id;if("cancel-modal"===i)document.querySelector("#main-content").removeChild(t);else if("submit-modal"===i){if(""===u.value||""===l.value)return void alert("All fields need to be filled");e[n()].addTask(new d(e[n()].id,l.value,p.value,u.value)),o(e[n()].tasks[e[n()].tasks.length-1],e[n()].id),document.querySelector("#main-content").removeChild(t)}})),document.querySelector("#main-content").appendChild(t)}():"edit-project"===r?function(){if(a(e[n()].id))return void alert("You can only edit added projects");const t=document.createElement("div"),d=document.createElement("div"),o=document.createElement("p"),l=document.createElement("p"),r=document.createElement("p"),c=document.createElement("input"),s=document.createElement("input"),u=document.createElement("textarea"),p=document.createElement("button"),m=document.createElement("button");t.setAttribute("id","edit-project-modal"),d.setAttribute("id","modal-controls"),u.setAttribute("id","edit-project-description"),r.setAttribute("class","edit-project-para"),o.setAttribute("class","edit-project-para"),l.setAttribute("class","edit-project-para"),c.setAttribute("id","edit-project-name"),s.setAttribute("id","edit-project-icon"),p.setAttribute("id","cancel-modal"),m.setAttribute("id","submit-modal"),r.textContent="Edit project description",o.textContent="Change project name",l.textContent="Change project icon",p.textContent="Cancel",m.textContent="Submit",c.value=e[n()].name,s.value=e[n()].icon,u.textContent=e[n()].description,t.appendChild(o),t.appendChild(c),t.appendChild(l),t.appendChild(s),t.appendChild(r),t.appendChild(u),t.appendChild(d),d.appendChild(p),d.appendChild(m),document.querySelector("#main-content").appendChild(t),d.addEventListener("click",(d=>{let a=d.target.id;if("cancel-modal"===a)document.querySelector("#main-content").removeChild(t);else if("submit-modal"===a){if(""===c.value||s.value||""===u)return void alert("All fields need to be filled up");e[n()].name=c.value,e[n()].icon=s.value,e[n()].description=u.value,document.querySelector(`div#${e[n()].id} > .iconHolderSpan`).textContent=s.value,document.querySelector(`div#${e[n()].id} > .textHolderSpan`).textContent=c.value,i(),document.querySelector("#main-content").removeChild(t)}}))}():"delete-project"===r&&function(){if(a(e[n()].id))return void alert("You can only delete added projects");const t=document.createElement("div"),d=document.createElement("div"),o=document.createElement("p"),r=document.createElement("button"),c=document.createElement("button");t.setAttribute("id","delete-project-modal"),d.setAttribute("id","delete-modal-controls"),o.setAttribute("class","delete-project-para"),r.setAttribute("id","cancel-modal"),c.setAttribute("id","submit-modal"),o.textContent="Are you sure you want to delete this project?",r.textContent="Cancel",c.textContent="Submit",t.appendChild(o),t.appendChild(d),d.appendChild(r),d.appendChild(c),document.querySelector("#main-content").appendChild(t),d.addEventListener("click",(d=>{let a=d.target.id;if("cancel-modal"===a)document.querySelector("#main-content").removeChild(t);else if("submit-modal"===a){let d=n();document.querySelector(`#${e[d].id}`).remove(),l("inbox"),e.splice(d,1),document.querySelector("#main-content").removeChild(t),i()}}))}()}))})();